---
import ToolLayout from "../../components/ToolLayout.astro";

const baseRaw = import.meta.env.BASE_URL;
const base = baseRaw.endsWith("/") ? baseRaw : `${baseRaw}/`;
const href = (path: string) => `${base}${String(path).replace(/^\//, "")}`;

const toolModules = await Astro.glob("./*.astro");

const tools = toolModules
  .map((m) => {
    const slug = (m.file || "").split("/").pop()?.replace(/\.astro$/, "") || "";
    return {
      slug,
      href: href(`tools/${slug}`),
      title: (m as any).title ?? slug,
      description: (m as any).description ?? "",
    };
  })
  .filter((t) => t.slug && t.slug !== "index")
  .sort((a, b) => a.title.localeCompare(b.title));
---

<ToolLayout title="All tools" description="A complete list of available in-browser developer tools.">
  <p style="margin-top:0; color:#4b5563;">
    All tools run locally in your browser. No uploads. No tracking.
  </p>

  {tools.length === 0 ? (
    <p>No tools yet.</p>
  ) : (
    <ul style="list-style:none; padding:0; margin:0; display:grid; gap: 10px;">
      {tools.map((t) => (
        <li style="border:1px solid #e5e7eb; border-radius:14px; padding:12px;">
          <a href={t.href} style="text-decoration:none; font-weight:700; display:inline-block; margin-bottom:6px;">
            {t.title}
          </a>
          {t.description ? (
            <div style="color:#4b5563;">{t.description}</div>
          ) : (
            <div style="color:#9ca3af;">No description yet.</div>
          )}
        </li>
      ))}
    </ul>
  )}
</ToolLayout>

