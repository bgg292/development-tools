---
import ToolLayout from "../../components/ToolLayout.astro";
---

<ToolLayout title="JSON Formatter" description="Format and validate JSON locally in your browser.">
  <textarea id="in" rows="10" style="width:100%;" placeholder='{"hello":"world"}'></textarea>
  <div style="margin: 10px 0;">
    <button id="btn">Format</button>
    <button id="copy" disabled>Copy output</button>
  </div>
  <pre id="out" style="white-space:pre-wrap; padding:12px; border:1px solid #e5e7eb; border-radius:10px;"></pre>

  <script type="module">
    const $in = document.getElementById("in");
    const $out = document.getElementById("out");
    const $copy = document.getElementById("copy");

    document.getElementById("btn").addEventListener("click", () => {
      try {
        const obj = JSON.parse($in.value);
        $out.textContent = JSON.stringify(obj, null, 2);
        $copy.disabled = false;
      } catch (e) {
        $out.textContent = "Invalid JSON: " + e.message;
        $copy.disabled = true;
      }
    });

    $copy.addEventListener("click", async () => {
      await navigator.clipboard.writeText($out.textContent);
      $copy.textContent = "Copied!";
      setTimeout(() => ($copy.textContent = "Copy output"), 1200);
    });
  </script>
</ToolLayout>

